<!DOCTYPE html>
<html>
    <head>
        <title>link(arlo)s</title>
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <link rel="stylesheet" href="styles.css">
        <link href='https://fonts.googleapis.com/css?family=VT323' rel='stylesheet'>
        <style>
        body {
            font-family: 'VT323';font-size: 22px;
        }
        </style>
    </head>
<body>
    <h1 id="texto">C:\Carlos Moreno </h1>
    <script>
        const textos = ["C:\\Carlos Moreno|", "C:\\Carlos Moreno"];
        let indice = 0;

        function cambiarTexto() {
            const elemento = document.getElementById("texto");
            elemento.textContent = textos[indice];
            indice = (indice + 1) % textos.length;
        }

        setInterval(cambiarTexto, 530); // Cambia el texto cada segundos
    </script>
    <p>Linktree casero</p>
    <p>Hecho para ver desde móvil.</p>
        <h2>Carlos:</h2>
    <p>nerd que hace muchas cosas, wikipedia enjoyer</p>
        <h2>LINK(ARLO)S</h2>
        <div style="text-align:center">
            <p><a class="link-button spotify" href="https://open.spotify.com/user/21ekd643rqqyxhssbnqjycrfy?si=f6f29d6814664eab">Spotify</a><p>
            <p><a class="link-button letterbox" href="https://boxd.it/9uosP">Letterbox</a><p>
            <p><a class="link-button steam" href="https://steamcommunity.com/id/poopoopeepeeheehee/">Steam</a><p>
            <p><a class="link-button instagram" href="https://www.instagram.com/carlosmorenomalvado/">Instagram</a><p>
            <p><a class="link-button github" href="https://github.com/carmoran0">Github</a><p>
            <p><a class="link-button correo" href="mailto:metricas_mensulas.0p@icloud.com">Correo</a><p>
        </div>
        <div id="now-playing">
            <p>Now Playing:</p>
            <img id="album-cover" src="" alt="Album Cover">
            <span id="track-name"></span> - <span id="artist-name"></span>
        </div>
        <p></p>
        <p>Hola hola</p>
    <script>
        const clientId = '1e4caf68abfd436fa4cada7d8da95ac6';
        const redirectUri = 'https://carmoran0.github.io/'; // Cambia esto a tu URL de redirección
        let accessToken = '';

        function getAccessToken() {
            const urlParams = new URLSearchParams(window.location.hash.replace('#', '?'));
            const token = urlParams.get('access_token');
            if (token) {
                accessToken = token;
                return token;
            } else {
                const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=token&redirect_uri=${encodeURIComponent(redirectUri)}&scope=user-read-recently-played`;
                window.location.href = authUrl;
            }
        }

        async function getRecentlyPlayed(token) {
            const response = await fetch('https://api.spotify.com/v1/me/player/recently-played', {
                headers: {
                    'Authorization': 'Bearer ' + token
                }
            });
            const data = await response.json();
            if (data && data.items && data.items.length > 0) {
                const item = data.items[0].track;
                document.getElementById('album-cover').src = item.album.images[0].url;
                document.getElementById('track-name').textContent = item.name;
                document.getElementById('artist-name').textContent = item.artists.map(artist => artist.name).join(', ');
            }
        }

        async function updateNowPlaying() {
            const token = getAccessToken();
            if (token) {
                await getRecentlyPlayed(token);
            }
        }

        updateNowPlaying();
        setInterval(updateNowPlaying, 20000); // Actualiza cada 20 segundos
    </script>
</body>
</html>