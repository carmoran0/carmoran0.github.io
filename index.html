<!DOCTYPE html>
<html>
    <head>
        <title>link(arlo)s</title>
        <link rel="shortcut icon" type="image/png" href="/favicon.png">
        <link rel="stylesheet" href="styles.css">
        <link href='https://fonts.googleapis.com/css?family=VT323' rel='stylesheet'>
        <style>
        body {
            font-family: 'VT323';font-size: 22px;
        }
        </style>
    </head>
<body>
    <h1 id="texto">C:\Carlos Moreno </h1>
    <script>
        const textos = ["C:\\Carlos Moreno|", "C:\\Carlos Moreno"];
        let indice = 0;

        function cambiarTexto() {
            const elemento = document.getElementById("texto");
            elemento.textContent = textos[indice];
            indice = (indice + 1) % textos.length;
        }

        setInterval(cambiarTexto, 530); // Cambia el texto cada segundos
    </script>
    <p>Linktree de marca blanca :3 (TODAVÍA MUY WIP)</p>
    <p>Hecho para ver desde móvil...</p>
        <h2>Introducción a Carlos</h2>
    <p>Soy un puto nerd que hace muchas cosas, wikipedia enjoyer y eso</p>
        <h2>LINK(ARLO)S</h2>
        <div style="text-align:center">
            <p><a style="
                background-color: #1ED760;
                color: white;
                padding: 14px 25px;
                text-align: center;
                width:300px;
                font-size: 60px;
                text-decoration: none;
                display: inline-block;" href="https://open.spotify.com/user/21ekd643rqqyxhssbnqjycrfy?si=f6f29d6814664eab">Spotify</a><p>
            <p><a style="
                background-color: #ff8000;
                color: white;
                padding: 14px 25px;
                text-align: center;
                width:300px;
                font-size: 60px;
                text-decoration: none;
                display: inline-block;" href="https://boxd.it/9uosP">Letterbox</a><p>
            <p><a style="
                background-color: #2a475e;
                color: white;
                padding: 14px 25px;
                text-align: center;
                width:300px;
                font-size: 60px;
                text-decoration: none;
                display: inline-block;" href="https://steamcommunity.com/id/poopoopeepeeheehee/">Steam</a><p>
            <p><a style="
                background-color: #ff0069;
                color: white;
                padding: 14px 25px;
                text-align: center;
                width:300px;
                font-size: 60px;
                text-decoration: none;
                display: inline-block;" href="https://www.instagram.com/carlosmorenomalvado/">Instagram</a><p>
            <p><a style="
                background-color: #6e5494;
                color: white;
                padding: 14px 25px;
                text-align: center;
                width:300px;
                font-size: 60px;
                text-decoration: none;
                display: inline-block;" href="https://github.com/carmoran0">Github?</a><p>
            <p><a style="
                background-color: #c8c8c8;
                color: rgb(0, 0, 0);
                padding: 14px 25px;
                text-align: center;
                width:300px;
                font-size: 60px;
                text-decoration: none;
                display: inline-block;" href="mailto:metricas_mensulas.0p@icloud.com">Correo?</a><p>
            
        </div>
        <h2>Currently Playing on Spotify</h2>
        <div id="now-playing"></div>
    
        <script>
            const clientId = '27260d3e27f6431db26ff047ab9d1fc9';
            const clientSecret = '7a32b3348e114706a6bdabcbe8a48c07';
            const redirectUri = 'https://carmoran0.github.io/';
            const authEndpoint = 'https://accounts.spotify.com/authorize';
            const tokenEndpoint = 'https://accounts.spotify.com/api/token';
            const nowPlayingEndpoint = 'https://api.spotify.com/v1/me/player/currently-playing';
    
            let accessToken = '';
            let refreshToken = '';
    
            function getAuthCode() {
                const url = `${authEndpoint}?client_id=${clientId}&response_type=code&redirect_uri=${encodeURIComponent(redirectUri)}&scope=user-read-currently-playing`;
                window.location = url;
            }
    
            async function getTokens(authCode) {
                const response = await fetch(tokenEndpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'Authorization': 'Basic ' + btoa(clientId + ':' + clientSecret)
                    },
                    body: `grant_type=authorization_code&code=${authCode}&redirect_uri=${encodeURIComponent(redirectUri)}`
                });
                const data = await response.json();
                accessToken = data.access_token;
                refreshToken = data.refresh_token;
                getNowPlaying();
            }
    
            async function refreshAccessToken() {
                const response = await fetch(tokenEndpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'Authorization': 'Basic ' + btoa(clientId + ':' + clientSecret)
                    },
                    body: `grant_type=refresh_token&refresh_token=${refreshToken}`
                });
                const data = await response.json();
                accessToken = data.access_token;
                getNowPlaying();
            }
    
            async function getNowPlaying() {
                const response = await fetch(nowPlayingEndpoint, {
                    headers: {
                        'Authorization': 'Bearer ' + accessToken
                    }
                });
                if (response.status === 401) {
                    await refreshAccessToken();
                } else {
                    const data = await response.json();
                    document.getElementById('now-playing').innerText = data.item ? `${data.item.name} by ${data.item.artists.map(artist => artist.name).join(', ')}` : 'Nothing is currently playing.';
                }
            }
    
            // Extract the authorization code from the URL
            const urlParams = new URLSearchParams(window.location.search);
            const authCode = urlParams.get('code');
            if (authCode) {
                getTokens(authCode);
            } else {
                getAuthCode();
            }
        </script>
        <p>No voy a poner mi twitter que solo lo uso pa stalkear gente</p>
        <p>Ya iré poniendo más cosas? Supongo¿?</p>
</body>
</html>